{% extends "::Admin/show.html.twig" %}

{% block title %}
    {{ 'title_edit' | trans({'%name%': admin.toString(object) }, 'SonataAdminBundle') }}
{% endblock %}

{% block show %}
    <div class="sonata-ba-view">
        {{ form_start(form) }}
            <div class="row">
                <div class="col-md-3">
                    <div class="box box-info">
                        <div class="box-header">
                            <h3 class="box-title">{{ 'backend.admin.dates' | trans }}</h3>
                        </div>
                        <div class="box-body">
                            {{ form_row(form.begin) }}
                            {{ form_row(form.end) }}
                            {{ form_row(form.dayFrequencyRepeat) }}
                            {{ form_row(form.until) }}
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="box box-info">
                        <div class="box-header">
                            <h3 class="box-title">{{ 'backend.admin.general' | trans }}</h3>
                        </div>
                        <div class="box-body">
                            {{ form_row(form.classroom) }}
                            {{ form_row(form.teacher) }}
                            {{ form_row(form.group) }}
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="box box-info">
                        <div class="box-header">
                            <h3 class="box-title">{{ 'backend.admin.event.students' | trans }}</h3>
                        </div>
                        <div class="box-body">
                            {{ form_row(form.students) }}
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-12">
                    <div class="box box-info">
                        <div class="box-header">
                            <h3 class="box-title">{{ 'backend.admin.event.timelapse' | trans }}</h3>
                        </div>
                        <div class="box-body">
                            <div class="progress">
                                {% if firstEvent is not null %}
                                    <div class="progress-bar progress-bar-danger" style="width:35%">
                                        <span class="pull-left" style="margin-left:5px">{{ firstEvent.begin | date('d/m/Y H:i') }}</span>
                                    </div>
                                    <div class="progress-bar progress-bar-success progress-bar-striped" style="width:20%">
                                        <span class="pull-left" style="margin-left:5px">{{ object.begin | date('d/m/Y H:i') }}</span>
                                    </div>
                                    <div class="progress-bar progress-bar-success progress-bar-striped" style="width:45%">
                                        <span class="pull-right" style="margin-right:5px">{{ lastEvent.begin | date('d/m/Y H:i') }}</span>
                                    </div>
                                {% else %}
                                    <div class="progress-bar progress-bar-success progress-bar-striped" style="width:20%">
                                        <span class="pull-left" style="margin-left:5px">{{ object.begin | date('d/m/Y H:i') }}</span>
                                    </div>
                                    <div class="progress-bar progress-bar-success progress-bar-striped" style="width:80%">
                                        <span class="pull-right" style="margin-right:5px">{{ lastEvent.begin | date('d/m/Y H:i') }}</span>
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-12">
                    <div class="sonata-ba-form-actions well well-small form-actions">
                        <button type="submit" class="btn btn-info" name="btn_update_and_edit"><i class="fa fa-clock-o" aria-hidden="true"></i> {{ 'backend.admin.event.button.special_timelapse_update_action' | trans }}</button>
                        <div class="btn-group" role="group">
                            <a class="btn btn-success" href="{{ admin.generateObjectUrl('edit', object) }}" title="{{ 'backend.admin.event.button.switch_to_normal_edit' | trans({}, 'messages') }}"><i class="fa fa-save" aria-hidden="true"></i> {{ 'backend.admin.event.button.switch_to_normal_edit' | trans({}, 'messages') }}</a>
                        </div>
                        {# timelapse buttons section #}
                        {% include ":Admin/Event:timelapse_buttons_section.html.twig" with {mode: 'batchedit'} %}
                    </div>
                </div>
            </div>
            {{ form_rest(form) }}
        {{ form_end(form) }}
    </div>
{% endblock %}
